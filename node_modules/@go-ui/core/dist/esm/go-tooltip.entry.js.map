{"file":"go-tooltip.entry.js","mappings":"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","names":[],"sources":["src/components/go-tooltip/go-tooltip.scss?tag=go-tooltip","src/components/go-tooltip/go-tooltip.tsx"],"sourcesContent":["go-tooltip {\n  /**\n    @prop --tooltip-bg-color:\n      Background color of the tooltip.\n      - default: var(--go-color-primary-800)\n  */\n  --tooltip-bg-color: var(--go-color-primary-800);\n\n  /**\n    @prop --tooltip-fg-color:\n      Text color of the tooltip.\n      - default: var(--go-color-lightest)\n  */\n  --tooltip-fg-color: var(--go-color-lightest);\n\n  /**\n    @prop --tooltip-padding:\n      Padding around tooltip\n      - default: 0.5rem\n  */\n  --tooltip-padding: 0.5rem;\n\n  /**\n    @prop --tooltip-radius:\n      Border radius of tooltip\n      - default: var(--radius-2)\n  */\n  --tooltip-radius: var(--radius-2);\n\n  @include transition(opacity, visibility);\n\n  position: fixed;\n  display: block;\n  visibility: hidden;\n  opacity: 0;\n  background-color: var(--tooltip-bg-color);\n  color: var(--tooltip-fg-color);\n  padding: var(--tooltip-padding);\n  border-radius: var(--tooltip-radius);\n  box-shadow: var(--shadow-1);\n  pointer-events: none;\n  font-size: var(--go-size-0);\n  z-index: var(--layer-important);\n\n  &.is-active {\n    visibility: visible;\n    opacity: 1;\n    pointer-events: inherit;\n  }\n\n  .tooltip-tail {\n    position: absolute;\n    background: var(--tooltip-bg-color);\n    width: 6px;\n    height: 6px;\n    transform: rotate(45deg);\n  }\n}\n","import { Component, Host, h, Element, Prop, State, Method } from '@stencil/core';\nimport { uniqueId, debounce } from 'lodash-es';\nimport { computePosition, flip, shift, arrow, offset, autoUpdate, inline } from '@floating-ui/dom';\n\n@Component({\n  tag: 'go-tooltip',\n  styleUrl: 'go-tooltip.scss',\n  shadow: false,\n})\nexport class GoTooltip {\n  @Element() el: HTMLElement;\n\n  /**\n   * Query selector string for the trigger element\n   */\n  @Prop() triggerId: string;\n\n  /**\n   * Add arrow to the tooltip\n   */\n  @Prop() arrow: boolean = false;\n\n  /**\n   * Improve positioning for inline trigger elements that span over multiple lines.\n   * Reference: https://floating-ui.com/docs/inline\n   */\n  @Prop() inline: boolean = false;\n\n  /**\n   * placement of tooltip relative to the trigger element\n   */\n  @Prop() placement: 'top' | 'bottom' | 'left' | 'right' = 'top';\n\n  private triggerEl: HTMLElement;\n  private arrowEl: HTMLElement;\n\n  componentWillLoad() {\n    // if id attribute is not provided, generate a unique id for the tooltip\n    if (!this.el.id) {\n      this.el.id = uniqueId('go-tooltip-');\n    }\n    this.triggerEl = document.querySelector(`#${this.triggerId}`) as HTMLElement;\n  }\n\n  private cleanUpAutoUpdate;\n\n  componentDidLoad() {\n    if (!this.triggerEl) {\n      return;\n    }\n\n    this.triggerEl.setAttribute('aria-describedby', this.el.id);\n    // add event handlers to triggerEl\n    this.triggerEl.addEventListener('mouseenter', () => this.show());\n    document.addEventListener('mousemove', (e) => this.debouncedDetermineMouseOut(e));\n    this.triggerEl.addEventListener('focusin', () => this.show());\n    this.triggerEl.addEventListener('focusout', () => this.hide());\n\n    this.arrowEl = this.el.querySelector('.tooltip-tail') as HTMLElement;\n    this.initialiseTooltip(this.triggerEl, this.el, this.arrowEl);\n    // keep watching for changes to the tooltip position\n    this.cleanUpAutoUpdate = autoUpdate(\n      this.triggerEl,\n      this.el,\n      debounce(() => this.initialiseTooltip(this.triggerEl, this.el, this.arrowEl), 300),\n      { animationFrame: true },\n    );\n\n    // press esc to hide tooltip\n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape') {\n        this.hide();\n      }\n    });\n  }\n\n  initialiseTooltip(triggerEl, tooltipEl, arrowEl) {\n    let middleware = [offset(8), flip(), shift()];\n    if (this.arrow) {\n      middleware.push(arrow({ element: arrowEl }));\n    }\n\n    if (this.inline) {\n      middleware.push(inline());\n    }\n    computePosition(triggerEl, tooltipEl, {\n      strategy: 'fixed',\n      placement: this.placement,\n      middleware,\n    }).then(({ x, y, placement, middlewareData }) => {\n      Object.assign(this.el.style, {\n        left: `${x}px`,\n        top: `${y}px`,\n      });\n      if (this.arrow) {\n        // Accessing the data\n        const { x: arrowX, y: arrowY } = middlewareData.arrow;\n\n        const staticSide = {\n          top: 'bottom',\n          right: 'left',\n          bottom: 'top',\n          left: 'right',\n        }[placement.split('-')[0]];\n\n        Object.assign(arrowEl.style, {\n          left: arrowX != null ? `${arrowX}px` : '',\n          top: arrowY != null ? `${arrowY}px` : '',\n          right: '',\n          bottom: '',\n          [staticSide]: '-3px',\n        });\n      }\n    });\n  }\n\n  @State() isActive: boolean = false;\n\n  /**\n   * show tooltip\n   */\n  @Method()\n  async show() {\n    this.isActive = true;\n  }\n\n  /**\n   * hide tooltip\n   */\n  @Method()\n  async hide() {\n    this.isActive = false;\n  }\n  debouncedDetermineMouseOut = debounce(this.determineMouseOut, 150);\n  determineMouseOut(e: MouseEvent) {\n    if (!this.isActive) {\n      return;\n    }\n    // check if mouse is outside of the tooltip and the trigger element\n    const { x, y } = e;\n    const { left, top, right, bottom } = this.el.getBoundingClientRect();\n    const { left: triggerLeft, top: triggerTop, right: triggerRight, bottom: triggerBottom } = this.triggerEl.getBoundingClientRect();\n    const isOutside = x < left || x > right || y < top || y > bottom;\n    const isOutsideTrigger = x < triggerLeft || x > triggerRight || y < triggerTop || y > triggerBottom;\n    if (isOutside && isOutsideTrigger) {\n      this.hide();\n    }\n  }\n\n  disconnectedCallback() {\n    this.cleanUpAutoUpdate && this.cleanUpAutoUpdate();\n  }\n\n  render() {\n    const { isActive, arrow } = this;\n\n    return (\n      <Host role=\"tooltip\" class={{ 'is-active': isActive }} aria-hidden={isActive ? 'false' : 'true'}>\n        <slot></slot>\n        {arrow ? <div class=\"tooltip-tail\"></div> : null}\n      </Host>\n    );\n  }\n}\n"],"version":3}