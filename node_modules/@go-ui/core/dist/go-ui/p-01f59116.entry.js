import{r as i,c as t,h as s,H as o,g as d}from"./p-02398fa0.js";import{o as r,f as a,a as e,c as n}from"./p-19ba150b.js";import"./p-4b4ba6fd.js";import{o as h}from"./p-42cfbc6e.js";import{u as c}from"./p-2acfdb5a.js";import{d as f}from"./p-517cc46f.js";const p="go-dropdown{--dropdown-shadow:var(--shadow-3);--dropdown-bg-color:var(--go-color-lightest);--dropdown-duration:var(--go-duration-fast);--dropdown-radius:var(--radius-2);position:fixed;display:none;visibility:hidden;opacity:0;box-shadow:var(--dropdown-shadow);pointer-events:none;z-index:1;transform:translateY(-0.3125rem);transform-origin:top;width:var(--dropdown-width, 200px);background-color:var(--dropdown-bg-color);border-radius:var(--dropdown-radius);transition:opacity var(--dropdown-duration) var(--go-timing-function), visibility var(--go-duration-normal) var(--go-timing-function), transform var(--dropdown-duration) var(--go-timing-function)}@media (prefers-reduced-motion: reduce){go-dropdown{transition-duration:0s}}go-dropdown.full-width{--dropdown-width:100%}go-dropdown.flip{transform-origin:bottom;transform:translateY(0.3125rem)}go-dropdown.is-active{visibility:visible;opacity:1;pointer-events:inherit;transform:translateY(0)}";const l=p;const u=class{constructor(s){i(this,s);this.opened=t(this,"opened",7);this.closed=t(this,"closed",7);this.triggerSelector=undefined;this.isActive=false;this.width="auto";this.noTriggerClickHandler=false;this.fullWidth=false;this.disabled=false}async open(){if(this.disabled){return}this.originEl=document.activeElement;this.isActive=true;this.opened.emit()}async close(i=false){this.isActive=false;this.closed.emit();if(this.originEl&&i){this.originEl.focus()}}async toggle(){if(this.isActive){this.close()}else{this.open()}}componentWillLoad(){if(!this.el.id){this.el.id=c("go-dropdown-")}this.triggerEl=document.querySelector(`${this.triggerSelector}`)}async componentDidLoad(){if(!this.triggerEl){return}await this.init();this.escapeHandler=i=>{if(i.code==="Escape"){this.close()}};this.focusOutHandler=i=>{if(this.triggerEl.contains(i.relatedTarget)){return}if(i.relatedTarget&&!this.el.contains(i.relatedTarget)){this.close()}};document.addEventListener("keydown",this.escapeHandler);this.el.addEventListener("focusout",this.focusOutHandler)}disconnectedCallback(){if(this.escapeHandler){document.removeEventListener("keydown",this.escapeHandler)}if(this.focusOutHandler){this.el.removeEventListener("focusout",this.focusOutHandler)}if(this.clickOutsideCleanUp){this.clickOutsideCleanUp()}if(this.cleanupAutoUpdate){this.cleanupAutoUpdate()}}async init(){this.triggerEl.setAttribute("aria-haspopup","true");this.setTriggerExpanded(this.isActive);if(!this.noTriggerClickHandler){this.triggerEl.addEventListener("click",(()=>this.toggle()))}this.clickOutsideCleanUp=h(this.el,(i=>{if(!this.triggerEl.contains(i.target)&&this.isActive){this.close()}}));const i=[r(4),a()];this.cleanupAutoUpdate=e(this.triggerEl,this.el,f((()=>{n(this.triggerEl,this.el,{strategy:"fixed",placement:"bottom-start",middleware:i}).then((({x:i,y:t,middlewareData:s})=>{var o,d;Object.assign(this.el.style,{left:`${i}px`,top:`${t}px`});if(((d=(o=s.flip)===null||o===void 0?void 0:o.overflows)===null||d===void 0?void 0:d.length)>0){this.el.classList.add("flip")}else{this.el.classList.remove("flip")}}))}),50))}setTriggerExpanded(i){this.triggerEl.setAttribute("aria-expanded",String(i))}handleActiveChange(i){this.setTriggerExpanded(i);if(i){this.el.style.display="block"}else{this.el.addEventListener("transitionend",(()=>{this.el.style.display="none"}),{once:true});this.triggerEl.focus()}}render(){let{isActive:i,width:t,fullWidth:d}=this;return s(o,{key:"174d6d272f5936aec0445bd40168e6f929adc093",class:{"is-active":i,"full-width":d},"aria-hidden":i?"false":"true",style:{"--dropdown-width":t}},s("div",{key:"1fd09ef5f152240d046dafdb14ca90cf9d39479d",class:"dropdown-content"},s("slot",{key:"c5d8cbee34c6724319ee63bddb84fc8d075f97d4"})))}get el(){return d(this)}static get watchers(){return{isActive:["handleActiveChange"]}}};u.style=l;export{u as go_dropdown};
//# sourceMappingURL=p-01f59116.entry.js.map