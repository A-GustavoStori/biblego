import{r as t,h as i,H as o,g as s}from"./p-02398fa0.js";import{a as e,o as a,f as r,s as n,b as l,i as c,c as h}from"./p-19ba150b.js";import{d}from"./p-517cc46f.js";import{u as p}from"./p-2acfdb5a.js";const m="go-tooltip{--tooltip-bg-color:var(--go-color-primary-800);--tooltip-fg-color:var(--go-color-lightest);--tooltip-padding:0.5rem;--tooltip-radius:var(--radius-2);transition:opacity var(--go-duration-normal) var(--go-timing-function), visibility var(--go-duration-normal) var(--go-timing-function);position:fixed;display:block;visibility:hidden;opacity:0;background-color:var(--tooltip-bg-color);color:var(--tooltip-fg-color);padding:var(--tooltip-padding);border-radius:var(--tooltip-radius);box-shadow:var(--shadow-1);pointer-events:none;font-size:var(--go-size-0);z-index:var(--layer-important)}@media (prefers-reduced-motion: reduce){go-tooltip{transition-duration:0s}}go-tooltip.is-active{visibility:visible;opacity:1;pointer-events:inherit}go-tooltip .tooltip-tail{position:absolute;background:var(--tooltip-bg-color);width:0.375rem;height:0.375rem;transform:rotate(45deg)}";const f=m;const u=class{constructor(i){t(this,i);this.debouncedDetermineMouseOut=d(this.determineMouseOut,150);this.triggerId=undefined;this.arrow=false;this.inline=false;this.placement="top";this.isActive=false}componentWillLoad(){if(!this.el.id){this.el.id=p("go-tooltip-")}this.triggerEl=document.querySelector(`#${this.triggerId}`)}componentDidLoad(){if(!this.triggerEl){return}this.triggerEl.setAttribute("aria-describedby",this.el.id);this.triggerEl.addEventListener("mouseenter",(()=>this.show()));document.addEventListener("mousemove",(t=>this.debouncedDetermineMouseOut(t)));this.triggerEl.addEventListener("focusin",(()=>this.show()));this.triggerEl.addEventListener("focusout",(()=>this.hide()));this.arrowEl=this.el.querySelector(".tooltip-tail");this.initialiseTooltip(this.triggerEl,this.el,this.arrowEl);this.cleanUpAutoUpdate=e(this.triggerEl,this.el,d((()=>this.initialiseTooltip(this.triggerEl,this.el,this.arrowEl)),300),{animationFrame:true});document.addEventListener("keydown",(t=>{if(t.key==="Escape"){this.hide()}}))}initialiseTooltip(t,i,o){let s=[a(8),r(),n()];if(this.arrow){s.push(l({element:o}))}if(this.inline){s.push(c())}h(t,i,{strategy:"fixed",placement:this.placement,middleware:s}).then((({x:t,y:i,placement:s,middlewareData:e})=>{Object.assign(this.el.style,{left:`${t}px`,top:`${i}px`});if(this.arrow){const{x:t,y:i}=e.arrow;const a={top:"bottom",right:"left",bottom:"top",left:"right"}[s.split("-")[0]];Object.assign(o.style,{left:t!=null?`${t}px`:"",top:i!=null?`${i}px`:"",right:"",bottom:"",[a]:"-3px"})}}))}async show(){this.isActive=true}async hide(){this.isActive=false}determineMouseOut(t){if(!this.isActive){return}const{x:i,y:o}=t;const{left:s,top:e,right:a,bottom:r}=this.el.getBoundingClientRect();const{left:n,top:l,right:c,bottom:h}=this.triggerEl.getBoundingClientRect();const d=i<s||i>a||o<e||o>r;const p=i<n||i>c||o<l||o>h;if(d&&p){this.hide()}}disconnectedCallback(){this.cleanUpAutoUpdate&&this.cleanUpAutoUpdate()}render(){const{isActive:t,arrow:s}=this;return i(o,{key:"55eb8e0d96d24c7da560e58ddc984dc581582ae5",role:"tooltip",class:{"is-active":t},"aria-hidden":t?"false":"true"},i("slot",{key:"da4bb428731cdc538d96045060af5ba303e91cc3"}),s?i("div",{class:"tooltip-tail"}):null)}get el(){return s(this)}};u.style=f;export{u as go_tooltip};
//# sourceMappingURL=p-7bd2d8ef.entry.js.map