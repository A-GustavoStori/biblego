{"version":3,"file":"go-content-layout.js","sourceRoot":"","sources":["../../../src/patterns/go-content-layout/go-content-layout.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, h, Element, Prop, Method, State, Watch } from '@stencil/core';\nimport { TocProps } from '../../components/go-toc/go-toc';\nimport { INavItem } from '../../interfaces';\nimport { watchDevice } from '../../utils/match-media';\nimport { hasSlot } from '../../utils/helper';\n\nexport type SidebarPosition = 'start' | 'end';\n\nexport interface ContentLayoutProps {\n  pageHeading: string;\n  preHeading?: string;\n  intro?: string;\n  breadcrumbs?: INavItem[] | string;\n  heroImgSrc?: string;\n  heroImgAlt?: string;\n  toc?: boolean;\n  tocProps?: TocProps;\n  sidebarMobilePosition?: SidebarPosition;\n  sidebarDesktopPosition?: SidebarPosition;\n}\n\n/**\n * @slot intro - Hero section intro text\n * @slot main - Main section\n */\n@Component({\n  tag: 'go-content-layout',\n  styleUrl: 'go-content-layout.scss',\n  shadow: false,\n})\nexport class GoContentLayout implements ContentLayoutProps {\n  @Element() el: HTMLElement;\n\n  @Prop() pageHeading: string;\n\n  @Prop() preHeading?: string;\n\n  @Prop() intro?: string;\n\n  @Prop() breadcrumbs?: INavItem[] | string;\n\n  @Prop() heroImgSrc?: string;\n\n  @Prop() heroImgAlt?: string;\n\n  /**\n   * no hero banner\n   */\n  @Prop() noHero?: boolean = false;\n\n  /**\n   * If the \"On this page\" table of content section should be displayed\n   */\n  @Prop() toc?: boolean;\n  /**\n   * Props to pass into the table of content ([see `go-toc` props](/docs/components/go-toc#go-toc-props))\n   */\n  @Prop() tocProps?: TocProps;\n  /**\n   * sidebar position on mobile screens\n   * possible values are `start` and `end`\n   */\n  @Prop() sidebarMobilePosition?: SidebarPosition = 'start';\n\n  /**\n   * sidebar position on desktop screens\n   * possible values are `start` and `end`\n   */\n  @Prop() sidebarDesktopPosition?: SidebarPosition = 'start';\n\n  /**\n   * If sidebar should be sticky\n   */\n  @Prop() sidebarSticky? = false;\n  tocEl: HTMLGoTocElement;\n\n  sidebarTemplate: HTMLElement;\n\n  sidebarContainerStart: HTMLElement;\n  sidebarContainerEnd: HTMLElement;\n\n  @Method()\n  async initToc() {\n    if (this.tocEl) {\n      await this.tocEl.init();\n    }\n  }\n\n  @State() computedSidebarPosition: SidebarPosition | null = null;\n  hasSidebar = false;\n  async componentWillLoad() {\n    this.hasSidebar = hasSlot(this.el, 'sidebar');\n    // add resize observer to toggle between mobile and desktop\n    watchDevice((device) => {\n      const { sidebarMobilePosition, sidebarDesktopPosition } = this;\n      const deviceSidebarPosition = {\n        mobile: sidebarMobilePosition,\n        tablet: sidebarMobilePosition,\n        desktop: sidebarDesktopPosition,\n        large: sidebarDesktopPosition,\n      };\n\n      this.computedSidebarPosition = deviceSidebarPosition[device];\n    });\n  }\n\n  rowEl: HTMLElement;\n\n  @Watch('computedSidebarPosition')\n  adjustSidebarPosition(pos: SidebarPosition | null) {\n    if (!this.hasSidebar || !this.sidebarTemplate) {\n      return;\n    }\n    const tempSidebar = this.sidebarTemplate;\n    tempSidebar.style.display = 'block';\n    tempSidebar.setAttribute('aria-hidden', 'false');\n    if (pos === 'start') {\n      this.sidebarContainerStart.appendChild(tempSidebar);\n    } else {\n      this.sidebarContainerEnd?.appendChild(tempSidebar);\n    }\n  }\n\n  componentDidLoad() {\n    this.initToc();\n  }\n\n  render() {\n    const { pageHeading, intro, preHeading, breadcrumbs, toc, tocProps, hasSidebar, computedSidebarPosition, sidebarSticky: sticky, noHero } = this;\n\n    const classes = {\n      start:\n        computedSidebarPosition === 'start'\n          ? {\n              'content-sidebar col-12 col-desktop-3': true,\n              sticky,\n            }\n          : null,\n      end:\n        computedSidebarPosition === 'end'\n          ? {\n              'content-sidebar col-12 col-desktop-3 offset-desktop-1': true,\n              sticky,\n            }\n          : null,\n    };\n\n    return (\n      <Host>\n        <div ref={(el) => (this.sidebarTemplate = el)} id=\"sidebar-template\" aria-hidden={true} style={{ display: 'none' }}>\n          <div class={{ 'content-sidebar': true, sticky }}>\n            {toc && <go-toc {...tocProps} ref={(el) => (this.tocEl = el)}></go-toc>}\n            <slot name=\"sidebar\"></slot>\n          </div>\n        </div>\n        {!noHero && (\n          <go-hero breadcrumbs={breadcrumbs} preHeading={preHeading} heading={pageHeading}>\n            <slot name=\"full-width-bg\"></slot>\n            <slot name=\"intro\">\n              <p>{intro}</p>\n            </slot>\n          </go-hero>\n        )}\n        <div class=\"container content-container\">\n          <div class=\"row\">\n            {hasSidebar && <aside ref={(el) => (this.sidebarContainerStart = el)} class={classes.start}></aside>}\n            <main\n              class={{\n                'col-12 col-desktop-8 content-main': true,\n                'offset-desktop-1': hasSidebar && computedSidebarPosition === 'start',\n              }}>\n              {!hasSidebar && toc && <go-toc {...tocProps} ref={(el) => (this.tocEl = el)}></go-toc>}\n              <slot></slot>\n            </main>\n            {hasSidebar && <aside ref={(el) => (this.sidebarContainerEnd = el)} class={classes.end}></aside>}\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}